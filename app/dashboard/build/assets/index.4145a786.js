import{e as Oe,c as p,U as Ge,C as Ye,a as Qe,u as qe,j as o,H as C,b as e,T as f,d as Xe,B as M,L as Ke,$ as Je,f as et,g as tt,m as Ce,M as rt,S as ot,h as at,A as nt,i as de,k as lt,I as E,l as st,n as it,o as ct,p as we,q as dt,r as l,s as S,W as pt,N as ht,E as mt,F as V,t as ut,v as ft,w as gt,Q as Re,x as bt,y as xt,z as yt,D as ke,G as O,J as Ct,K as G,O as Se,P as Y,R as U,V as wt,X as kt,Y as St,Z as It,_ as Ue,a0 as _t,a1 as vt,a2 as Ie,a3 as Ae,a4 as Lt,a5 as Z,a6 as We,a7 as pe,a8 as Fe,a9 as Et,aa as zt,ab as Mt,ac as Te,ad as Rt,ae as le,af as Ut,ag as F,ah as T,ai as At,aj as Wt,ak as Ft,al as Tt,am as Bt,an as Be,ao as Ht,ap as Dt,aq as Q,ar as q,as as X,at as K,au as J,av as ee,aw as He,ax as Pt,ay as Zt,az as L,aA as $t,aB as De,aC as Pe,aD as z,aE as ae,aF as Vt,aG as jt,aH as se,aI as ie,aJ as Nt,aK as Ot,aL as Gt,aM as Yt,aN as Qt,aO as qt,aP as Xt,aQ as Kt,aR as Jt,aS as er,aT as tr,aU as rr,aV as or,aW as ar,aX as nr,aY as lr,aZ as sr,a_ as ir,a$ as cr,b0 as dr,b1 as pr}from"./vendor.bc5bd71b.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}})();const hr=Oe({shadows:{outline:"0 0 0 2px var(--chakra-colors-primary-200)"},fonts:{body:"Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif"},colors:{"light-border":"#d2d2d4",primary:{50:"#9cb7f2",100:"#88a9ef",200:"#749aec",300:"#618ce9",400:"#4d7de7",500:"#396fe4",600:"#3364cd",700:"#2e59b6",800:"#284ea0",900:"#224389"},gray:{750:"#222C3B"}},components:{Alert:{baseStyle:{container:{borderRadius:"6px",fontSize:"sm"}}},Select:{baseStyle:{field:{_dark:{borderColor:"gray.600"}}}},FormHelperText:{baseStyle:{fontSize:"xs"}},FormLabel:{baseStyle:{fontSize:"sm",fontWeight:"medium",mb:"1",_dark:{color:"gray.300"}}},Input:{baseStyle:{addon:{_dark:{borderColor:"gray.600",_placeholder:{color:"gray.500"}}},field:{_focusVisible:{boxShadow:"none",borderColor:"primary.200",outlineColor:"primary.200"},_dark:{borderColor:"gray.600",_disabled:{borderColor:"gray.500"},_placeholder:{color:"gray.500"}}}}},Table:{baseStyle:{table:{borderCollapse:"separate",borderSpacing:0},thead:{borderBottomColor:"light-border"},th:{background:"#F9FAFB",borderColor:"light-border !important",borderBottomColor:"light-border !important",borderTop:"1px solid ",borderTopColor:"light-border !important",_first:{borderLeft:"1px solid",borderColor:"light-border !important"},_last:{borderRight:"1px solid",borderColor:"light-border !important"},_dark:{borderColor:"gray.600 !important",background:"gray.750"}},td:{transition:"all .1s ease-out",borderColor:"light-border",borderBottomColor:"light-border !important",_first:{borderLeft:"1px solid",borderColor:"light-border",_dark:{borderColor:"gray.600"}},_last:{borderRight:"1px solid",borderColor:"light-border",_dark:{borderColor:"gray.600"}},_dark:{borderColor:"gray.600",borderBottomColor:"gray.600 !important"}},tr:{"&.interactive":{cursor:"pointer",_hover:{"& > td":{bg:"gray.200"},_dark:{"& > td":{bg:"gray.750"}}}},_last:{"& > td":{_first:{borderBottomLeftRadius:"8px"},_last:{borderBottomRightRadius:"8px"}}}}}}}});function H(t,r=2,a=!1){if(!+t)return"0 B";const i=1024,n=r<0?0:r,s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(t)/Math.log(i));return a?[parseFloat((t/Math.pow(i,c)).toFixed(n)),s[c]]:`${parseFloat((t/Math.pow(i,c)).toFixed(n))} ${s[c]}`}const _e=t=>{if(t)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},mr=p(Ge,{baseStyle:{w:5,h:5,position:"relative",zIndex:"2"}}),ur=p(Ye,{baseStyle:{w:5,h:5,position:"relative",zIndex:"2"}}),fr=p(Qe,{baseStyle:{w:5,h:5,position:"relative",zIndex:"2"}}),ne=({title:t,content:r,icon:a})=>o(Xe,{p:6,borderWidth:"1px",borderColor:"light-border",bg:"#F9FAFB",_dark:{borderColor:"gray.600",bg:"gray.750"},borderStyle:"solid",boxShadow:"none",borderRadius:"12px",width:"full",display:"flex",justifyContent:"space-between",flexDirection:"row",children:[o(C,{alignItems:"center",experimental_spaceX:"4",children:[e(M,{p:"2",position:"relative",color:"white",_before:{content:'""',position:"absolute",top:0,left:0,bg:"primary.400",display:"block",w:"full",h:"full",borderRadius:"5px",opacity:".5",z:"1"},_after:{content:'""',position:"absolute",top:"-5px",left:"-5px",bg:"primary.400",display:"block",w:"calc(100% + 10px)",h:"calc(100% + 10px)",borderRadius:"8px",opacity:".4",z:"1"},children:a}),e(f,{color:"gray.600",_dark:{color:"gray.300"},fontWeight:"medium",textTransform:"capitalize",fontSize:"sm",children:t})]}),e(M,{fontSize:"3xl",fontWeight:"semibold",mt:"2",children:r})]}),gr=t=>{const{data:r}=qe("/system",{revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:5e3});return o(C,{justifyContent:"space-between",gap:0,experimental_spaceX:{lg:"4",md:"0"},experimental_spaceY:{lg:"0",base:"4"},display:{lg:"flex",md:"block"},...t,children:[e(ne,{title:"active users",content:r&&o(C,{alignItems:"flex-end",children:[e(f,{children:_e(r.users_active)}),o(f,{fontWeight:"normal",fontSize:"lg",as:"span",display:"inline-block",pb:"5px",children:["/ ",_e(r.total_user)]})]}),icon:e(mr,{})}),e(ne,{title:"data usage",content:r&&H(r.incoming_bandwidth+r.outgoing_bandwith),icon:e(ur,{})}),e(ne,{title:"memory usage",content:r&&o(C,{alignItems:"flex-end",children:[e(f,{children:H(r.mem_used,1,!0)[0]}),o(f,{fontWeight:"normal",fontSize:"lg",as:"span",display:"inline-block",pb:"5px",children:[H(r.mem_used,1,!0)[1]," /"," ",H(r.mem_total,1)]})]}),icon:e(fr,{})})]})},Ze=t=>e(C,{w:"full",py:"0",position:"relative",...t,children:o(f,{display:"inline-block",flexGrow:1,textAlign:"center",color:"gray.500",fontSize:"xs",children:["Made with \u2764\uFE0F in"," ",e(Ke,{color:"blue.400",href:"https://github.com/gozargah",children:"Gozargah"})]})}),ce=()=>localStorage.getItem("token"),br=t=>{localStorage.setItem("token",t)},xr=()=>{localStorage.removeItem("token")},yr=Je.create({baseURL:"/api/"}),$e=(t,r={})=>(ce()&&(r.headers={...(r==null?void 0:r.headers)||{},Authorization:`Bearer ${ce()}`}),yr(t,r)),D=$e,Ve=t=>(_.setState({loading:!0}),D("/users",{query:t}).then(r=>(_.setState({users:r}),r)).finally(()=>{_.setState({loading:!1})})),_=et(tt((t,r)=>({editingUser:null,deletingUser:null,isCreatingNewUser:!1,QRcodeLinks:null,subscribeUrl:null,users:[],loading:!0,isEditingHosts:!1,filters:{search:""},refetchUsers:()=>{Ve(r().filters)},onCreateUser:a=>t({isCreatingNewUser:a}),onEditingUser:a=>{t({editingUser:a})},onDeletingUser:a=>{t({deletingUser:a})},onFilterChange:a=>{t({filters:a})},setQRCode:a=>{t({QRcodeLinks:a})},deleteUser:a=>(t({editingUser:null}),D(`/user/${a.username}`,{method:"DELETE"}).then(()=>{t({deletingUser:null}),r().refetchUsers(),Ce("/system")})),createUser:a=>D("/user",{method:"POST",body:a}).then(()=>{t({editingUser:null}),r().refetchUsers(),Ce("/system")}),editUser:a=>D(`/user/${a.username}`,{method:"PUT",body:a}).then(()=>{t({editingUser:null}),r().refetchUsers()}),onEditingHosts:a=>{t({isEditingHosts:a})},setSubLink:a=>{t({subscribeUrl:a})}}),t=>({filteredUsers:t.users.filter(r=>r.username.indexOf(t.filters.search)>-1)})));Ve(_.getState().filters);const Cr=p(rt,{baseStyle:{w:"4",h:"4"}}),wr=p(ot,{baseStyle:{w:"4",h:"4"}}),he={baseStyle:{w:4,h:4}},kr=p(at,he),Sr=p(nt,he),Ir=p(de,he),_r=({actions:t})=>{const{onEditingHosts:r}=_(),{colorMode:a,toggleColorMode:i}=lt();return o(C,{gap:2,justifyContent:"space-between",children:[e(f,{as:"h1",fontWeight:"semibold",fontSize:"2xl",children:"Users"}),o(C,{children:[e(E,{size:"sm",variant:"outline","aria-label":"switch theme",onClick:i,children:a==="light"?e(Cr,{}):e(wr,{})}),o(st,{children:[e(it,{as:E,size:"sm",variant:"outline",icon:e(kr,{})}),o(ct,{minW:"170px",children:[e(we,{maxW:"170px",fontSize:"sm",icon:e(Ir,{}),onClick:r.bind(null,!0),children:"Hosts Settings"}),e(dt,{to:"/login",children:e(we,{maxW:"170px",fontSize:"sm",icon:e(Sr,{}),children:"Log out"})})]})]})]})]})},vr=t=>l.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",width:782.04441,height:701.88002,viewBox:"0 0 782.04441 701.88002",xmlnsXlink:"http://www.w3.org/1999/xlink",...t},l.exports.createElement("path",{d:"M609.48783,100.59015l-25.44631,6.56209L270.53735,187.9987,245.091,194.56079A48.17927,48.17927,0,0,0,210.508,253.17865L320.849,681.05606a48.17924,48.17924,0,0,0,58.61776,34.58317l.06572-.01695,364.26536-93.93675.06572-.01695a48.17923,48.17923,0,0,0,34.58309-58.6178l-110.341-427.87741A48.17928,48.17928,0,0,0,609.48783,100.59015Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M612.94784,114.00532l-30.13945,7.77236L278.68955,200.20385l-30.139,7.77223a34.30949,34.30949,0,0,0-24.6275,41.74308l110.341,427.87741a34.30946,34.30946,0,0,0,41.7431,24.62736l.06572-.01695,364.26536-93.93674.06619-.01707a34.30935,34.30935,0,0,0,24.627-41.7429l-110.341-427.87741A34.30938,34.30938,0,0,0,612.94784,114.00532Z",transform:"translate(-208.9778 -99.05999)",fill:"#fff"}),l.exports.createElement("path",{d:"M590.19,252.56327,405.917,300.08359a8.01411,8.01411,0,0,1-4.00241-15.52046l184.273-47.52033A8.01412,8.01412,0,0,1,590.19,252.56327Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M628.955,270.49906,412.671,326.27437a8.01411,8.01411,0,1,1-4.00241-15.52046l216.284-55.77531a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M620.45825,369.93676l-184.273,47.52032a8.01411,8.01411,0,1,1-4.00242-15.52046l184.273-47.52032a8.01411,8.01411,0,1,1,4.00241,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M659.22329,387.87255l-216.284,55.77531a8.01411,8.01411,0,1,1-4.00242-15.52046l216.284-55.77531a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M650.72653,487.31025l-184.273,47.52033a8.01412,8.01412,0,0,1-4.00242-15.52047l184.273-47.52032a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M689.49156,505.246l-216.284,55.77532a8.01412,8.01412,0,1,1-4.00241-15.52047l216.284-55.77531a8.01411,8.01411,0,0,1,4.00242,15.52046Z",transform:"translate(-208.9778 -99.05999)",fill:"#f2f2f2"}),l.exports.createElement("path",{d:"M374.45884,348.80871l-65.21246,16.817a3.847,3.847,0,0,1-4.68062-2.76146L289.5963,304.81607a3.847,3.847,0,0,1,2.76145-4.68061l65.21247-16.817a3.847,3.847,0,0,1,4.68061,2.76145l14.96947,58.04817A3.847,3.847,0,0,1,374.45884,348.80871Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M404.72712,466.1822l-65.21247,16.817a3.847,3.847,0,0,1-4.68062-2.76146l-14.96946-58.04816A3.847,3.847,0,0,1,322.626,417.509l65.21246-16.817a3.847,3.847,0,0,1,4.68062,2.76145l14.96946,58.04817A3.847,3.847,0,0,1,404.72712,466.1822Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M434.99539,583.55569l-65.21246,16.817a3.847,3.847,0,0,1-4.68062-2.76145l-14.96946-58.04817a3.847,3.847,0,0,1,2.76145-4.68062l65.21247-16.817a3.847,3.847,0,0,1,4.68061,2.76146l14.96947,58.04816A3.847,3.847,0,0,1,434.99539,583.55569Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M863.63647,209.0517H487.31811a48.17928,48.17928,0,0,0-48.125,48.12512V699.05261a48.17924,48.17924,0,0,0,48.125,48.12507H863.63647a48.17924,48.17924,0,0,0,48.125-48.12507V257.17682A48.17928,48.17928,0,0,0,863.63647,209.0517Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M863.637,222.90589H487.31811a34.30948,34.30948,0,0,0-34.271,34.27093V699.05261a34.30947,34.30947,0,0,0,34.271,34.27088H863.637a34.30936,34.30936,0,0,0,34.27051-34.27088V257.17682A34.30937,34.30937,0,0,0,863.637,222.90589Z",transform:"translate(-208.9778 -99.05999)",fill:"#fff"}),l.exports.createElement("circle",{cx:694.19401,cy:614.02963,r:87.85039,fill:"#3182CE"}),l.exports.createElement("path",{d:"M945.18722,701.63087H914.63056V671.07421a11.45875,11.45875,0,0,0-22.9175,0v30.55666H861.1564a11.45875,11.45875,0,0,0,0,22.9175h30.55666V755.105a11.45875,11.45875,0,1,0,22.9175,0V724.54837h30.55666a11.45875,11.45875,0,0,0,0-22.9175Z",transform:"translate(-208.9778 -99.05999)",fill:"#fff"}),l.exports.createElement("path",{d:"M807.00068,465.71551H616.699a8.01412,8.01412,0,1,1,0-16.02823H807.00068a8.01412,8.01412,0,0,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M840.05889,492.76314H616.699a8.01412,8.01412,0,1,1,0-16.02823H840.05889a8.01411,8.01411,0,1,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M807.00068,586.929H616.699a8.01412,8.01412,0,1,1,0-16.02823H807.00068a8.01411,8.01411,0,0,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M840.05889,613.97661H616.699a8.01412,8.01412,0,1,1,0-16.02823H840.05889a8.01412,8.01412,0,1,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M574.07028,505.04162H506.72434a3.847,3.847,0,0,1-3.84278-3.84278V441.25158a3.847,3.847,0,0,1,3.84278-3.84278h67.34594a3.847,3.847,0,0,1,3.84278,3.84278v59.94726A3.847,3.847,0,0,1,574.07028,505.04162Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M574.07028,626.25509H506.72434a3.847,3.847,0,0,1-3.84278-3.84278V562.46505a3.847,3.847,0,0,1,3.84278-3.84278h67.34594a3.847,3.847,0,0,1,3.84278,3.84278v59.94726A3.847,3.847,0,0,1,574.07028,626.25509Z",transform:"translate(-208.9778 -99.05999)",fill:"#e6e6e6"}),l.exports.createElement("path",{d:"M807.21185,330.781H666.91017a8.01411,8.01411,0,0,1,0-16.02823H807.21185a8.01411,8.01411,0,0,1,0,16.02823Z",transform:"translate(-208.9778 -99.05999)",fill:"#ccc"}),l.exports.createElement("path",{d:"M840.27007,357.82862H666.91017a8.01411,8.01411,0,1,1,0-16.02822h173.3599a8.01411,8.01411,0,0,1,0,16.02822Z",transform:"translate(-208.9778 -99.05999)",fill:"#ccc"}),l.exports.createElement("path",{d:"M635.85911,390.6071H506.51316a3.847,3.847,0,0,1-3.84277-3.84277V285.81706a3.847,3.847,0,0,1,3.84277-3.84277H635.85911a3.847,3.847,0,0,1,3.84277,3.84277V386.76433A3.847,3.847,0,0,1,635.85911,390.6071Z",transform:"translate(-208.9778 -99.05999)",fill:"#ccc"})),je=t=>{let r="";return t&&(S(t*1e3).utc().isAfter(S().utc())?r="Expires "+S().to(S(t*1e3).utc()):r="Expired "+S().to(S(t*1e3).utc())),r},me={baseStyle:{strokeWidth:"2px",w:4,h:4}},Lr=p(pt,me),Er=p(ht,me),zr=p(mt,me),Mr={active:{statusColor:"green",bandWidthColor:"green"},expired:{statusColor:"gray",bandWidthColor:"gray"},limited:{statusColor:"red",bandWidthColor:"red"}},Rr=({expiryDate:t,status:r})=>{let a=je(t);return o(V,{children:[o(ut,{colorScheme:Mr[r].statusColor,rounded:"full",display:"inline-flex",px:3,py:1,experimental_spaceX:2,alignItems:"center",children:[r==="active"&&e(Lr,{}),r==="limited"&&e(Er,{}),r==="expired"&&e(zr,{}),e(f,{textTransform:"capitalize",fontSize:".875rem",lineHeight:"1.25rem",fontWeight:"medium",letterSpacing:"tighter",children:r})]}),t&&e(f,{display:"inline-block",fontSize:"xs",fontWeight:"medium",ml:"2",color:"gray.600",_dark:{color:"gray.400"},children:a})]})},Ur=p(vr),te={baseStyle:{w:5,h:5}},Ar=p(ft,te),ve=p(gt,te),Wr=p(de,te),Fr=p(Re,te),Tr=t=>{const{used:r,total:a,...i}=t,n=a===0||a===null,s=!n&&r/a*100>=100;return o(V,{children:[e(wt,{orientation:"horizontal",value:n?100:Math.min(r/a*100,100),colorScheme:s?"red":"primary",...i,children:e(kt,{h:"6px",borderRadius:"full",children:e(St,{borderRadius:"full"})})}),o(f,{fontSize:"xs",fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},children:[H(r)," /"," ",n?e(f,{as:"span",fontFamily:"system-ui",children:"\u221E"}):H(a)]})]})},Br=t=>{const{filteredUsers:r,users:a,onEditingUser:i,setQRCode:n,setSubLink:s}=_(),c=bt({base:120,lg:72})||72,d=r.length!==a.length,[m,I]=l.exports.useState([-1,-1,!1]);l.exports.useEffect(()=>{m[2]&&setTimeout(()=>{I([-1,-1,!1])},1e3)},[m]);const w=l.exports.useCallback(()=>{const h=document.querySelectorAll("#users-table")[0],b=window.scrollY;document.querySelectorAll("#users-table thead th").forEach(k=>{const u=h.offsetTop-c<=b?b-h.offsetTop+c:0;k.style.transform=`translateY(${u}px)`})},[c,r]);return l.exports.useEffect(()=>(window.addEventListener("scroll",w),window.addEventListener("resize",w),()=>{window.removeEventListener("scroll",w),window.removeEventListener("resize",w)}),[w]),o(M,{id:"users-table",overflowX:"auto",maxW:"100vw",children:[o(xt,{...t,children:[e(yt,{zIndex:"docked",position:"relative",children:o(ke,{children:[e(O,{children:"Username"}),e(O,{children:"status"}),e(O,{children:"data usage"}),e(O,{})]})}),e(Ct,{children:r==null?void 0:r.map((h,b)=>{const k=h.links.join(`\r
`);return o(ke,{className:"interactive",onClick:()=>i(h),children:[e(G,{minW:"150px",children:h.username}),e(G,{width:"400px",minW:"280px",children:e(Rr,{expiryDate:h.expire,status:h.status})}),e(G,{width:"350px",minW:"230px",children:e(Tr,{used:h.used_traffic,total:h.data_limit,colorScheme:h.status==="limited"?"red":"primary"})}),e(G,{width:"150px",children:o(C,{justifyContent:"flex-end",onClick:u=>{u.preventDefault(),u.stopPropagation()},children:[e(Se,{text:h.subscription_url.startsWith("/")?window.location.origin+h.subscription_url:h.subscription_url,onCopy:()=>{I([b,0,!0])},children:e("div",{children:e(Y,{label:m[0]===b&&m[1]==0&&m[2]?"Copied":"Copy Subscription Link",placement:"top",children:e(E,{"aria-label":"copy subscription link",bg:"transparent",_dark:{_hover:{bg:"gray.700"}},children:m[0]===b&&m[1]==0&&m[2]?e(ve,{}):e(Wr,{})})})})}),e(Se,{text:k,onCopy:()=>{I([b,1,!0])},children:e("div",{children:e(Y,{label:m[0]===b&&m[1]==1&&m[2]?"Copied":"Copy Configs",placement:"top",children:e(E,{"aria-label":"copy configs",bg:"transparent",_dark:{_hover:{bg:"gray.700"}},children:m[0]===b&&m[1]==1&&m[2]?e(ve,{}):e(Ar,{})})})})}),e(Y,{label:"QR Code",placement:"top",children:e(E,{"aria-label":"qr code",bg:"transparent",_dark:{_hover:{bg:"gray.700"}},onClick:()=>{n(h.links),s(h.subscription_url)},children:e(Fr,{})})})]})})]},h.username)})})]}),r.length==0&&e(Hr,{isFiltered:d})]})},Hr=({isFiltered:t})=>{const{onCreateUser:r}=_();return o(M,{borderWidth:"1px",borderStyle:"solid",borderTop:0,borderBottomRadius:"8px",padding:"5",_dark:{borderColor:"gray.600"},py:"8",display:"flex",alignItems:"center",flexDirection:"column",experimental_spaceY:4,children:[e(Ur,{maxHeight:"200px",maxWidth:"200px",_dark:{'path[fill="#fff"]':{fill:"gray.800"},'path[fill="#f2f2f2"], path[fill="#e6e6e6"], path[fill="#ccc"]':{fill:"gray.700"},'circle[fill="#3182CE"]':{fill:"primary.300"}},_light:{'path[fill="#f2f2f2"], path[fill="#e6e6e6"], path[fill="#ccc"]':{fill:"gray.300"},'circle[fill="#3182CE"]':{fill:"primary.500"}}}),e(f,{fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},children:t?"It seems there is no user matched with what you are looking for":"There is no user added to the system"}),!t&&e(U,{size:"sm",colorScheme:"primary",onClick:()=>r(!0),children:"Create User"})]})},ue={baseStyle:{w:4,h:4}},Dr=p(It,ue),Pr=p(Ue,ue),Zr=p(_t,ue),$r=({...t})=>{const{loading:r,filters:a,onFilterChange:i,refetchUsers:n,onCreateUser:s}=_(),c=m=>{i({...a,search:m.target.value})},d=()=>{i({...a,search:""})};return o(vt,{templateColumns:{lg:"repeat(3, 1fr)",base:"repeat(1, 1fr)"},position:"sticky",top:0,mx:"-6",px:"6",rowGap:4,gap:{lg:4,base:0},bg:"var(--chakra-colors-chakra-body-bg)",py:4,zIndex:"docked",...t,children:[e(Ie,{colSpan:1,order:{base:2,lg:1},children:o(Ae,{children:[e(Lt,{pointerEvents:"none",children:e(Dr,{})}),e(Z,{placeholder:"Search",value:a.search||"",borderColor:"light-border",onChange:c}),o(We,{children:[r&&e(pe,{size:"xs"}),a.search.length>0&&e(E,{onClick:d,"aria-label":"clear",size:"xs",variant:"ghost",children:e(Pr,{})})]})]})}),e(Ie,{colSpan:2,order:{base:1,lg:2},children:o(C,{justifyContent:"flex-end",alignItems:"center",h:"full",children:[e(E,{"aria-label":"refresh users",disabled:r,onClick:n,size:"sm",variant:"outline",children:e(Zr,{className:Fe({"animate-spin":r})})}),e(U,{colorScheme:"primary",size:"sm",onClick:()=>s(!0),px:5,children:"Create User"})]})})]})},re=({children:t,color:r})=>e(M,{position:"relative",width:"36px",height:"36px",display:"flex",justifyContent:"center",alignItems:"center",_before:{content:'""',display:"block",position:"absolute",top:"0",left:"0",width:"calc(100%)",height:"calc(100%)",bg:`${r}.400`,opacity:".5",borderRadius:"5px",zIndex:"1",_dark:{bg:`${r}.400`}},_after:{content:'""',display:"block",position:"absolute",top:"0",left:"0",width:"calc(100% + 10px)",height:"calc(100% + 10px)",transform:"translate(-5px, -5px)",bg:`${r}.400`,opacity:".4",borderRadius:"8px",zIndex:"1",_dark:{bg:`${r}.400`}},children:e(f,{color:`${r}.500`,_dark:{color:`${r}.900`},position:"relative",zIndex:"2",children:t})}),Vr=p(Et,{baseStyle:{strokeWidth:"2px",w:5,h:5}}),jr=p(zt,{baseStyle:{strokeWidth:"2px",w:5,h:5}}),Nr=({disabled:t,title:r,description:a,...i})=>{const{getCheckboxProps:n,getInputProps:s,getLabelProps:c,htmlProps:d}=Rt(i);return o(M,{as:"label",children:[e("input",{...s()}),o(M,{w:"fll",position:"relative",...d,cursor:"pointer",borderRadius:"md",border:"1px solid",borderColor:"gray.200",_dark:{borderColor:"gray.600"},_checked:{bg:"gray.50",outline:"2px",boxShadow:"outline",outlineColor:"primary.500",borderColor:"transparent",fontWeight:"medium",_dark:{bg:"gray.750",borderColor:"transparent"},"& > svg":{opacity:1,"&.checked":{display:"block"},"&.unchecked":{display:"none"}},"& p":{opacity:1}},__css:{"& > svg":{opacity:.3,"&.checked":{display:"none"},"&.unchecked":{display:"block"}},"& p":{opacity:.8}},textTransform:"capitalize",px:3,py:2,fontWeight:"medium",...n(),children:[e(Vr,{className:"checked",color:"primary.200",position:"absolute",right:"3",top:"3"}),e(jr,{className:"unchecked",color:"primary.200",position:"absolute",right:"3",top:"3"}),e(f,{fontSize:"sm",color:"gray.700",_dark:{color:"gray.300"},...c(),children:r}),e(f,{fontWeight:"medium",color:"gray.600",_dark:{color:"gray.400"},fontSize:"xs",children:a})]})]})},Or=l.exports.forwardRef(({name:t,list:r,onChange:a,disabled:i,...n},s)=>{const{getCheckboxProps:c}=Mt({defaultValue:n.value,onChange:d=>{a({target:{value:d,name:t}})}});return e(Te,{ref:s,experimental_spaceY:1,alignItems:"flex-start",columns:1,spacing:1,children:r.map(d=>e(Nr,{disabled:i,title:d.title,description:d.description,...c({value:d.title})},d.title))})}),Gr=p(Ue,{baseStyle:{w:4,h:4}}),$=le.forwardRef(({disabled:t,step:r,label:a,className:i,startAdornment:n,endAdornment:s,type:c="text",placeholder:d,onChange:m,onBlur:I,name:w,value:h,onClick:b,error:k,clearable:u=!1,...B},oe)=>{const R=()=>{m&&m({target:{value:"",name:w}})},{size:P="md"}=B,j=c=="number"?Ht:Z,N=c=="number"?Ut:le.Fragment,g=c=="number"?{name:w,type:c,placeholder:d,onChange:A=>{m&&m(A)},onBlur:I,value:h,onClick:b,disabled:t,flexGrow:1,size:P}:{};return o(F,{isInvalid:!!k,children:[a&&e(T,{children:a}),o(Ae,{size:P,w:"full",rounded:"md",_focusWithin:{outline:"2px solid",outlineColor:"primary.200"},bg:t?"gray.100":"transparent",_dark:{bg:t?"gray.600":"transparent"},children:[n&&e(At,{children:n}),o(N,{...g,children:[e(j,{name:w,ref:oe,step:r,className:Fe(i),type:c,placeholder:d,onChange:m,onBlur:I,value:h,onClick:b,disabled:t,roundedLeft:n?"0":"md",roundedRight:s?"0":"md",flexGrow:1,_focusVisible:{outline:"none",borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent"},_disabled:{cursor:"not-allowed"},...B}),c=="number"&&e(V,{children:o(Wt,{children:[e(Ft,{}),e(Tt,{})]})})]}),s&&e(Bt,{borderRadius:"6px",bg:"transparent",children:s}),u&&h&&h.length&&e(We,{borderRadius:"6px",bg:"transparent",onClick:R,cursor:"pointer",children:e(Gr,{})})]}),!!k&&e(Be,{children:k})]})}),Ne=p(Dt,{baseStyle:{w:5,h:5}}),Yr=()=>{const[t,r]=l.exports.useState(!1),{deletingUser:a,onDeletingUser:i,deleteUser:n}=_(),s=()=>{i(null)},c=()=>{a&&(r(!0),n(a).then(s).finally(r.bind(null,!1)))};return o(Q,{isCentered:!0,isOpen:!!a,onClose:s,size:"sm",children:[e(q,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),o(X,{mx:"3",children:[e(K,{pt:6,children:e(re,{color:"red",children:e(Ne,{})})}),e(J,{mt:3}),o(ee,{children:[e(f,{fontWeight:"semibold",fontSize:"lg",children:"Delete user"}),a&&o(f,{mt:1,fontSize:"sm",_dark:{color:"gray.400"},color:"gray.600",children:["Are you sure you want to delete ",e("b",{children:a.username}),"?"]})]}),o(He,{display:"flex",children:[e(U,{size:"sm",onClick:s,mr:3,w:"full",variant:"outline",children:"Cancel"}),e(U,{size:"sm",w:"full",colorScheme:"red",onClick:c,leftIcon:t?e(pe,{size:"xs"}):void 0,children:"Delete"})]})]})]})},Qr=p(Pt,{baseStyle:{w:5,h:5}}),qr=p(Zt,{baseStyle:{w:5,h:5}}),Xr=L.object({username:L.string().min(1,{message:"Required"}),proxies:L.array(L.string()).refine(t=>t.length>0,{message:"Please select at least one protocol"}),data_limit:L.string().min(0,"The minimum number is 0").or(L.number()).nullable().transform(t=>t&&parseFloat(String(t))),expire:L.number().nullable()}),Kr=t=>({...t,data_limit:t.data_limit?Number((t.data_limit/1073741824).toFixed(6)):t.data_limit,proxies:Object.keys(t.proxies)}),Le=()=>({proxies:["vmess","vless","trojan"],data_limit:null,expire:null,username:""}),Jr=(t,r)=>{const a=t.reduce((i,n)=>({...i,[n]:{}}),{});return r&&t.forEach(i=>{r[i]&&(a[i]=r[i])}),a},eo=()=>{var P,j,N;const{editingUser:t,isCreatingNewUser:r,onCreateUser:a,editUser:i,onEditingUser:n,createUser:s,onDeletingUser:c}=_(),d=!!t,m=r||d,[I,w]=l.exports.useState(!1),[h,b]=l.exports.useState(""),k=$t(),u=De({defaultValues:Le(),resolver:Pe(Xr)}),B=()=>{u.reset(Le()),a(!1),n(null)},oe=g=>{w(!0);const A={edited:i,created:s},W=d?"edited":"created";b(null);let v={...g,data_limit:g.data_limit?g.data_limit*1073741824:g.data_limit,proxies:Jr(g.proxies,t==null?void 0:t.proxies)};A[W](v).then(()=>{k({title:`User ${g.username} ${W}.`,status:"success",isClosable:!0,position:"top",duration:3e3}),B()}).catch(x=>{var y,fe,ge,be,xe;(((y=x==null?void 0:x.response)==null?void 0:y.status)===409||((fe=x==null?void 0:x.response)==null?void 0:fe.status)===400)&&b((be=(ge=x==null?void 0:x.response)==null?void 0:ge._data)==null?void 0:be.detail),((xe=x==null?void 0:x.response)==null?void 0:xe.status)===422&&Object.keys(x.response._data.detail).forEach(ye=>{u.setError(ye,{type:"custom",message:x.response._data.detail[ye]})})}).finally(()=>{w(!1)})};l.exports.useEffect(()=>{t&&u.reset(Kr(t))},[t]);const R=I;return o(Q,{isOpen:m,onClose:B,size:"2xl",children:[e(q,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),e(X,{mx:"3",children:o("form",{onSubmit:u.handleSubmit(oe),children:[e(K,{pt:6,children:o(C,{gap:2,children:[e(re,{color:"primary",children:d?e(qr,{color:"white"}):e(Qr,{color:"white"})}),o(f,{fontWeight:"semibold",fontSize:"lg",children:[d?"Edit":"Create new"," user"]})]})}),e(J,{mt:3,disabled:R}),o(ee,{children:[o(Te,{columns:{base:1,md:2},spacing:3,mt:4,children:[o(z,{justifyContent:"space-between",children:[o(z,{gap:1,gridAutoRows:"min-content",w:"full",children:[o(F,{children:[e(T,{children:"Username"}),e($,{size:"sm",type:"text",borderRadius:"6px",error:(P=u.formState.errors.username)==null?void 0:P.message,disabled:R||d,...u.register("username")})]}),o(F,{children:[e(T,{children:"Data Limit"}),e(ae,{control:u.control,name:"data_limit",render:({field:g})=>{var A;return e($,{endAdornment:"GB",type:"number",size:"sm",borderRadius:"6px",step:"any",onChange:W=>{var x;const v=((x=W.target)==null?void 0:x.value)||W||"";if(v){const y=String(v).split(".");y.length>1&&y[1].length>6||y[0].length>6?(y.length>1&&y[1].length>6&&(y[1]=y[1].substring(0,6)),y[0].length>6&&(y[0]=y[0].substring(0,6)),y[1]?g.onChange(y[0]+"."+y[1].substring(0,6)):g.onChange(y[0])):g.onChange(v)}},disabled:R,error:(A=u.formState.errors.data_limit)==null?void 0:A.message,value:String(g.value)})}})]}),o(F,{children:[e(T,{children:"Expiry Date"}),e(ae,{name:"expire",control:u.control,render:({field:g})=>{var W;function A(v){return S(S(v*1e3).utc().format("MMMM D, YYYY")).toDate()}return o(V,{children:[e(Vt,{dateFormat:"MMMM d, yyy",minDate:new Date,selected:g.value?A(g.value):void 0,onChange:v=>{g.onChange({target:{value:v?S(S(v).set("hour",23).set("minute",59).set("second",59)).utc().valueOf()/1e3:0,name:"expire"}})},customInput:e($,{size:"sm",type:"text",borderRadius:"6px",clearable:!0,disabled:R,error:(W=u.formState.errors.expire)==null?void 0:W.message})}),g.value?e(jt,{children:je(g.value)}):""]})}})]})]}),h&&o(se,{status:"error",display:{base:"none",md:"flex"},children:[e(ie,{}),h]})]}),o(F,{isInvalid:!!((j=u.formState.errors.proxies)!=null&&j.message),children:[e(T,{children:"Protocols"}),e(ae,{control:u.control,name:"proxies",render:({field:g})=>e(Or,{list:[{title:"vmess",description:"Fast and secure"},{title:"vless",description:"Lightweight, fast and secure"},{title:"trojan",description:"Lightweight, secure and lightening fast"},{title:"shadowsocks",description:"Fast and secure, but not efficient as others"}],disabled:R,...g})}),e(Be,{children:(N=u.formState.errors.proxies)==null?void 0:N.message})]})]}),h&&o(se,{mt:"3",status:"error",display:{base:"flex",md:"none"},children:[e(ie,{}),h]})]}),e(He,{mt:"3",children:o(C,{justifyContent:"space-between",w:"full",gap:3,children:[e(C,{children:d&&e(V,{children:e(Y,{label:"Delete",placement:"top",children:e(E,{"aria-label":"Delete",size:"sm",onClick:()=>c(t),children:e(Ne,{})})})})}),o(C,{w:"full",maxW:{lg:"50%",base:"full"},children:[e(U,{onClick:B,size:"sm",variant:"outline",w:"full",disabled:R,children:"Cancel"}),e(U,{type:"submit",size:"sm",colorScheme:"primary",leftIcon:I?e(pe,{size:"xs"}):void 0,w:"full",disabled:R,children:d?"Edit user":"Create user"})]})]})})]})})]})};const Ee=p(Nt),to=p(Ot,{baseStyle:{w:6,h:6,color:"gray.600",_dark:{color:"white"}}}),ro=p(Gt,{baseStyle:{w:6,h:6,color:"gray.600",_dark:{color:"white"}}}),oo=p(Re,{baseStyle:{w:5,h:5}}),ao=()=>{const{QRcodeLinks:t,setQRCode:r,setSubLink:a,subscribeUrl:i}=_(),n=t!==null,[s,c]=l.exports.useState(0);return o(Q,{isOpen:n,onClose:()=>{r(null),a(null)},children:[e(q,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),o(X,{mx:"3",w:"fit-content",maxW:"3xl",children:[e(K,{pt:6,children:e(re,{color:"primary",children:e(oo,{color:"white"})})}),e(J,{mt:3}),t&&o(ee,{gap:{base:"20px",lg:"50px"},pr:{lg:"60px"},px:{base:"50px"},display:"flex",justifyContent:"center",flexDirection:{base:"column",lg:"row"},children:[i&&o(z,{children:[e(Ee,{mx:"auto",size:300,p:"2",level:"L",includeMargin:!1,value:i}),e(f,{display:"block",textAlign:"center",pb:3,mt:1,children:"Subscribe Link"})]}),o(M,{w:"300px",children:[e(Yt,{centerPadding:"0px",centerMode:!0,slidesToShow:1,slidesToScroll:1,dots:!1,afterChange:c,onInit:()=>c(0),nextArrow:e(E,{size:"sm",position:"absolute",display:"flex !important",_before:{content:'""'},"aria-label":"next",children:e(to,{})}),prevArrow:e(E,{size:"sm",position:"absolute",display:"flex !important",_before:{content:'""'},"aria-label":"prev",children:e(ro,{})}),children:t.map((m,I)=>e(C,{children:e(Ee,{mx:"auto",size:300,p:"2",level:"L",includeMargin:!1,value:m})},I))}),o(f,{display:"block",textAlign:"center",pb:3,mt:1,children:[s+1," / ",t.length]})]})]})]})]})},no=p(de,{baseStyle:{w:5,h:5}}),ze=()=>o(qt,{border:"1px solid",_dark:{borderColor:"gray.600"},_light:{borderColor:"gray.200"},borderRadius:"4px",p:1,w:"full",children:[o(Xt,{px:2,borderRadius:"3px",children:[e(f,{as:"span",fontWeight:"medium",fontSize:"sm",flex:"1",textAlign:"left",color:"gray.700",_dark:{color:"gray.300"},children:"VLESS_NO_TLS"}),e(Kt,{})]}),e(Jt,{px:2,pb:2,children:o(z,{gap:3,children:[o(z,{border:"1px solid",_dark:{borderColor:"gray.600"},_light:{borderColor:"gray.200"},p:2,borderRadius:"4px",children:[e(Z,{size:"sm",borderRadius:"4px",placeholder:"Remark"}),o(C,{children:[e(Z,{w:"70%",size:"sm",borderRadius:"4px",placeholder:"Address (e.g. google.com)"}),e(Z,{w:"30%",size:"sm",borderRadius:"4px",placeholder:"8080"})]})]}),e(U,{variant:"outline",w:"full",size:"sm",color:"",fontWeight:"normal",children:"Add host"})]})})]}),lo=()=>{const{isEditingHosts:t,onEditingHosts:r}=_(),a=r.bind(null,!1);return o(Q,{isOpen:t,onClose:a,children:[e(q,{bg:"blackAlpha.300",backdropFilter:"blur(10px)"}),o(X,{mx:"3",w:"fit-content",maxW:"3xl",children:[e(K,{pt:6,children:e(re,{color:"primary",children:e(no,{color:"white"})})}),e(J,{mt:3}),o(ee,{w:"440px",pb:3,pt:3,children:[e(f,{mb:3,opacity:.8,fontSize:"sm",children:"Using this setting, you are able to assign specific address for each inbound."}),e(Qt,{w:"full",allowToggle:!0,allowMultiple:!0,children:o(z,{w:"full",children:[e(ze,{}),e(ze,{})]})}),e(C,{justifyContent:"flex-end",py:2,children:e(U,{variant:"solid",mt:"2",colorScheme:"primary",size:"sm",px:5,children:"Apply"})})]})]})]})},so=()=>o(z,{justifyContent:"space-between",minH:"100vh",p:"6",experimental_spaceY:4,children:[o(M,{w:"full",children:[e(_r,{}),e(gr,{mt:"4"}),e($r,{}),e(Br,{}),e(eo,{}),e(Yr,{}),e(ao,{}),e(lo,{})]}),e(Ze,{})]}),io=t=>l.exports.createElement("svg",{viewBox:"0 0 747 747",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.exports.createElement("path",{d:"M746.671 209.652V77.6572C746.671 72.9384 743.827 68.6832 739.468 66.8811C735.108 65.0738 730.093 66.0739 726.754 69.4072L579.354 216.807C577.453 202.386 570.203 189.203 559.037 179.87C547.875 170.542 533.615 165.744 519.083 166.432C504.551 167.12 490.807 173.24 480.573 183.583L414.375 249.776C412.417 235.391 405.141 222.25 393.985 212.959C382.823 203.662 368.594 198.88 354.083 199.552C339.578 200.224 325.849 206.302 315.594 216.588L274.343 257.828L19.9167 3.41515C16.5781 0.0818157 11.5625 -0.918184 7.20306 0.889149C2.84373 2.69648 0 6.94648 0 11.6651V143.649C0 146.743 1.22917 149.712 3.41667 151.899L191.843 340.339L3.41667 528.753C1.2292 530.94 0 533.909 0 537.003V668.997C0 673.716 2.84373 677.971 7.20306 679.773C11.5624 681.581 16.578 680.58 19.9167 677.247L167.317 529.847C169.285 544.233 176.561 557.358 187.718 566.65C198.869 575.947 213.098 580.728 227.603 580.066C242.103 579.404 255.838 573.342 266.098 563.071L332.295 496.874V496.879C334.259 511.264 341.535 524.395 352.691 533.686C363.853 542.977 378.082 547.759 392.587 547.092C407.093 546.421 420.822 540.348 431.077 530.066L472.327 488.826L726.754 743.239C728.941 745.427 731.91 746.656 735.004 746.656C736.535 746.661 738.056 746.359 739.473 745.77C743.832 743.963 746.671 739.708 746.671 734.989V602.994C746.671 599.901 745.442 596.932 743.254 594.744L554.827 406.318L743.254 217.904H743.259C745.447 215.717 746.676 212.748 746.676 209.654L746.671 209.652ZM23.3373 39.8118L257.844 274.318L208.328 323.818L23.3413 138.818L23.3373 39.8118ZM723.337 706.825L488.831 472.318L538.347 422.818L723.333 607.818L723.337 706.825ZM23.3373 541.825L332.097 233.078C338.764 226.719 347.624 223.172 356.843 223.172C366.056 223.172 374.916 226.719 381.588 233.078C388.151 239.641 391.838 248.548 391.838 257.828C391.838 267.114 388.151 276.016 381.588 282.577L23.3347 640.831L23.3373 541.825ZM249.604 546.575C240.755 555.419 227.864 558.872 215.781 555.638C203.703 552.398 194.265 542.961 191.027 530.883C187.792 518.8 191.245 505.91 200.089 497.06L497.076 200.074C505.92 191.23 518.811 187.772 530.893 191.011C542.971 194.246 552.409 203.678 555.648 215.76C558.888 227.839 555.434 240.73 546.591 249.572L249.604 546.575ZM723.337 204.815L414.577 513.562C407.911 519.926 399.051 523.473 389.832 523.473C380.618 523.473 371.753 519.926 365.087 513.562C358.529 506.999 354.842 498.098 354.842 488.816C354.842 479.535 358.529 470.634 365.087 464.071L723.34 105.818L723.337 204.815Z",fill:"currentColor"})),co=L.object({username:L.string().min(1,"This field is required"),password:L.string().min(1,"This field is required")}),po=p(io,{baseStyle:{strokeWidth:"10px",w:12,h:12}}),Me=()=>{var w,h;const[t,r]=l.exports.useState(""),[a,i]=l.exports.useState(!1),n=er();let s=tr();const{register:c,formState:{errors:d},handleSubmit:m}=De({resolver:Pe(co)});return l.exports.useEffect(()=>{xr(),s.pathname!=="/login"&&n("/login",{replace:!0})},[]),o(z,{justifyContent:"space-between",minH:"100vh",p:"6",children:[e(C,{w:"full",justifyContent:"center",alignItems:"center",children:o(M,{w:"full",maxW:"340px",mt:"6",children:[o(z,{alignItems:"center",w:"full",children:[e(po,{}),e(f,{fontSize:"2xl",fontWeight:"semibold",children:"Login to your account"}),e(f,{color:"gray.600",_dark:{color:"gray.400"},children:"Welcome back, please enter your details"})]}),e("form",{onSubmit:m(b=>{r("");const k=new FormData;k.append("username",b.username),k.append("password",b.password),k.append("grant_type","password"),i(!0),D("/admin/token",{method:"post",body:k}).then(({access_token:u})=>{br(u),n("/")}).catch(u=>{r(u.response._data.detail)}).finally(i.bind(null,!1))}),children:o(z,{mt:4,experimental_spaceY:4,children:[o(F,{children:[e(T,{children:"Username"}),e($,{w:"full",placeholder:"Username",...c("username"),error:(w=d==null?void 0:d.username)==null?void 0:w.message})]}),o(F,{children:[e(T,{children:"Password"}),e($,{w:"full",type:"password",placeholder:"Password",...c("password"),error:(h=d==null?void 0:d.password)==null?void 0:h.message})]}),t&&o(se,{status:"error",rounded:"md",children:[e(ie,{}),e(rr,{children:t})]}),e(U,{isLoading:a,type:"submit",w:"full",colorScheme:"primary",children:"Login"})]})})]})}),e(Ze,{})]})},ho=()=>D("/admin",{headers:{Authorization:`Bearer ${ce()}`}}),mo=or([{path:"/",element:e(so,{}),errorElement:e(Me,{}),loader:ho},{path:"/login/",element:e(Me,{})}],{basename:"/dashboard/"});function uo(){return e("main",{className:"p-8",children:e(ar,{router:mo})})}S.extend(nr);S.extend(lr);S.extend(sr);S.extend(ir);cr.createRoot(document.getElementById("root")).render(e(le.StrictMode,{children:e(dr,{theme:hr,children:e(pr,{value:{fetcher:$e,revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!0},children:e(uo,{})})})}));
